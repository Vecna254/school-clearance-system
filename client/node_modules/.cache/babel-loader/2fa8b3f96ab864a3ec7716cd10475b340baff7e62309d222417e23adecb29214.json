{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Projects\\\\school-clearance-system\\\\client\\\\src\\\\pages\\\\department\\\\DeptStudentReview.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport Card from \"../../components/Card\";\nimport Field from \"../../components/FormField\";\nimport Button from \"../../components/Button\";\nimport api from \"../../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DeptStudentReview() {\n  _s();\n  const {\n    id\n  } = useParams(); // clearance_step_id\n  const nav = useNavigate();\n  const [item, setItem] = useState(null);\n  const [status, setStatus] = useState(\"pending\");\n  const [remarks, setRemarks] = useState(\"\");\n  const [has_dues, setHasDues] = useState(false);\n  const [dues_amount, setDuesAmount] = useState(0);\n  useEffect(() => {\n    ;\n    (async () => {\n      const {\n        data\n      } = await api.get(`/department/step/${id}`);\n      setItem(data);\n      setStatus(data.status);\n      setRemarks(data.remarks || \"\");\n      setHasDues(Boolean(data.has_dues));\n      setDuesAmount(data.dues_amount || 0);\n    })();\n  }, [id]);\n  const save = async newStatus => {\n    await api.post(`/department/step/${id}/decision`, {\n      status: newStatus || status,\n      remarks,\n      has_dues,\n      dues_amount\n    });\n    nav(\"/department/dashboard\");\n  };\n  if (!item) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Review: \", item.full_name, \" (\", item.admission_number, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Department: \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: item.department_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Field, {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: status,\n        onChange: e => setStatus(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"pending\",\n          children: \"Pending\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"cleared\",\n          children: \"Cleared\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"rejected\",\n          children: \"Rejected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Field, {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Remarks\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: remarks,\n        onChange: e => setRemarks(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Field, {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: has_dues,\n          onChange: e => setHasDues(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), \" Has dues\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), has_dues && /*#__PURE__*/_jsxDEV(Field, {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Dues Amount (Ksh)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: dues_amount,\n        onChange: e => setDuesAmount(Number(e.target.value))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => save(\"cleared\"),\n        children: \"Mark Cleared\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"danger\",\n        onClick: () => save(\"rejected\"),\n        children: \"Reject\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: () => save(\"pending\"),\n        children: \"Save Pending\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(DeptStudentReview, \"WW5wHtqSGY1+37F2IW3sKV/b420=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = DeptStudentReview;\nvar _c;\n$RefreshReg$(_c, \"DeptStudentReview\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useEffect","useState","useParams","useNavigate","Card","Field","Button","api","jsxDEV","_jsxDEV","DeptStudentReview","id","nav","item","setItem","status","setStatus","remarks","setRemarks","has_dues","setHasDues","dues_amount","setDuesAmount","data","get","Boolean","save","newStatus","post","children","fileName","lineNumber","columnNumber","full_name","admission_number","department_name","value","onChange","e","target","type","checked","Number","style","display","gap","onClick","variant","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Projects/school-clearance-system/client/src/pages/department/DeptStudentReview.js"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useParams, useNavigate } from \"react-router-dom\"\r\nimport Card from \"../../components/Card\"\r\nimport Field from \"../../components/FormField\"\r\nimport Button from \"../../components/Button\"\r\nimport api from \"../../services/api\"\r\n\r\nexport default function DeptStudentReview() {\r\n  const { id } = useParams() // clearance_step_id\r\n  const nav = useNavigate()\r\n  const [item, setItem] = useState(null)\r\n  const [status, setStatus] = useState(\"pending\")\r\n  const [remarks, setRemarks] = useState(\"\")\r\n  const [has_dues, setHasDues] = useState(false)\r\n  const [dues_amount, setDuesAmount] = useState(0)\r\n\r\n  useEffect(() => {\r\n    ;(async () => {\r\n      const { data } = await api.get(`/department/step/${id}`)\r\n      setItem(data)\r\n      setStatus(data.status)\r\n      setRemarks(data.remarks || \"\")\r\n      setHasDues(Boolean(data.has_dues))\r\n      setDuesAmount(data.dues_amount || 0)\r\n    })()\r\n  }, [id])\r\n\r\n  const save = async (newStatus) => {\r\n    await api.post(`/department/step/${id}/decision`, {\r\n      status: newStatus || status,\r\n      remarks,\r\n      has_dues,\r\n      dues_amount,\r\n    })\r\n    nav(\"/department/dashboard\")\r\n  }\r\n\r\n  if (!item) return <div>Loading...</div>\r\n\r\n  return (\r\n    <Card>\r\n      <h2>\r\n        Review: {item.full_name} ({item.admission_number})\r\n      </h2>\r\n      <p>\r\n        Department: <b>{item.department_name}</b>\r\n      </p>\r\n      <Field>\r\n        <label>Status</label>\r\n        <select value={status} onChange={(e) => setStatus(e.target.value)}>\r\n          <option value=\"pending\">Pending</option>\r\n          <option value=\"cleared\">Cleared</option>\r\n          <option value=\"rejected\">Rejected</option>\r\n        </select>\r\n      </Field>\r\n      <Field>\r\n        <label>Remarks</label>\r\n        <textarea value={remarks} onChange={(e) => setRemarks(e.target.value)} />\r\n      </Field>\r\n      <Field>\r\n        <label>\r\n          <input type=\"checkbox\" checked={has_dues} onChange={(e) => setHasDues(e.target.checked)} /> Has dues\r\n        </label>\r\n      </Field>\r\n      {has_dues && (\r\n        <Field>\r\n          <label>Dues Amount (Ksh)</label>\r\n          <input type=\"number\" value={dues_amount} onChange={(e) => setDuesAmount(Number(e.target.value))} />\r\n        </Field>\r\n      )}\r\n      <div style={{ display: \"flex\", gap: 8 }}>\r\n        <Button onClick={() => save(\"cleared\")}>Mark Cleared</Button>\r\n        <Button variant=\"danger\" onClick={() => save(\"rejected\")}>\r\n          Reject\r\n        </Button>\r\n        <Button variant=\"secondary\" onClick={() => save(\"pending\")}>\r\n          Save Pending\r\n        </Button>\r\n      </div>\r\n    </Card>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}