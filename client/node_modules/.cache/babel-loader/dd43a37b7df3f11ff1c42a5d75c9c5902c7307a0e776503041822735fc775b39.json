{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Projects\\\\school-clearance-system\\\\client\\\\src\\\\pages\\\\admin\\\\AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport Card from \"../../components/Card\";\nimport Table from \"../../components/Table\";\nimport Button from \"../../components/Button\";\nimport api from \"../../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminDashboard() {\n  _s();\n  const [rows, setRows] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    ;\n    (async () => {\n      try {\n        const {\n          data\n        } = await api.get(\"/admin/overview\");\n        setRows(data);\n      } catch (error) {\n        console.error(\"Error loading overview:\", error);\n      }\n    })();\n  }, []);\n  const fixClearances = async () => {\n    setLoading(true);\n    setMessage(\"\");\n    try {\n      const {\n        data\n      } = await api.post(\"/admin/fix-clearances\");\n      setMessage(`✅ ${data.message}`);\n      // Reload overview\n      const {\n        data: overview\n      } = await api.get(\"/admin/overview\");\n      setRows(overview);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setMessage(`❌ Error: ${((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Admin Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: fixClearances,\n          disabled: loading,\n          children: loading ? \"Fixing...\" : \"Fix Missing Department Clearances\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 10,\n            padding: 10,\n            background: \"#f0f0f0\",\n            borderRadius: 5\n          },\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Student\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Admission\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Progress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: rows.map(r => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.full_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.admission_number\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [r.cleared_count, \"/\", r.total_departments]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this)]\n          }, r.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminDashboard, \"9sKg2aZCMZqUO6SCxCHfz2xTYyQ=\");\n_c = AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useEffect","useState","Card","Table","Button","api","jsxDEV","_jsxDEV","AdminDashboard","rows","setRows","loading","setLoading","message","setMessage","data","get","error","console","fixClearances","post","overview","_error$response","_error$response$data","response","children","fileName","lineNumber","columnNumber","style","marginBottom","onClick","disabled","marginTop","padding","background","borderRadius","map","r","full_name","admission_number","status","cleared_count","total_departments","id","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Projects/school-clearance-system/client/src/pages/admin/AdminDashboard.js"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport Card from \"../../components/Card\"\r\nimport Table from \"../../components/Table\"\r\nimport Button from \"../../components/Button\"\r\nimport api from \"../../services/api\"\r\n\r\nexport default function AdminDashboard() {\r\n  const [rows, setRows] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [message, setMessage] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    ;(async () => {\r\n      try {\r\n        const { data } = await api.get(\"/admin/overview\")\r\n        setRows(data)\r\n      } catch (error) {\r\n        console.error(\"Error loading overview:\", error)\r\n      }\r\n    })()\r\n  }, [])\r\n\r\n  const fixClearances = async () => {\r\n    setLoading(true)\r\n    setMessage(\"\")\r\n    try {\r\n      const { data } = await api.post(\"/admin/fix-clearances\")\r\n      setMessage(`✅ ${data.message}`)\r\n      // Reload overview\r\n      const { data: overview } = await api.get(\"/admin/overview\")\r\n      setRows(overview)\r\n    } catch (error) {\r\n      setMessage(`❌ Error: ${error.response?.data?.error || error.message}`)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Card>\r\n        <h2>Admin Dashboard</h2>\r\n\r\n        <div style={{ marginBottom: 20 }}>\r\n          <Button onClick={fixClearances} disabled={loading}>\r\n            {loading ? \"Fixing...\" : \"Fix Missing Department Clearances\"}\r\n          </Button>\r\n          {message && (\r\n            <div style={{ marginTop: 10, padding: 10, background: \"#f0f0f0\", borderRadius: 5 }}>{message}</div>\r\n          )}\r\n        </div>\r\n\r\n        <Table>\r\n          <thead>\r\n            <tr>\r\n              <th>Student</th>\r\n              <th>Admission</th>\r\n              <th>Status</th>\r\n              <th>Progress</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows.map((r) => (\r\n              <tr key={r.id}>\r\n                <td>{r.full_name}</td>\r\n                <td>{r.admission_number}</td>\r\n                <td>{r.status}</td>\r\n                <td>\r\n                  {r.cleared_count}/{r.total_departments}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}