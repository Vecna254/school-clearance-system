{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Projects\\\\school-clearance-system\\\\client\\\\src\\\\pages\\\\auth\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Field from \"../../components/FormField\";\nimport Button from \"../../components/Button\";\nimport Card from \"../../components/Card\";\nimport { login } from \"../../services/auth\";\nimport { saveToken, saveUser } from \"../../services/storage\";\nimport styled from \"styled-components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  max-width: 400px;\n  margin: ${({\n  theme\n}) => theme.spacing(4)} auto;\n`;\n_c = Container;\nconst Title = styled.h2`\n  text-align: center;\n  margin-bottom: ${({\n  theme\n}) => theme.spacing(3)};\n  color: ${({\n  theme\n}) => theme.colors.text};\n`;\n_c2 = Title;\nconst ErrorMessage = styled.div`\n  color: ${({\n  theme\n}) => theme.colors.danger};\n  background: ${({\n  theme\n}) => theme.colors.danger}10;\n  padding: ${({\n  theme\n}) => theme.spacing(1.5)};\n  border-radius: ${({\n  theme\n}) => theme.radius};\n  margin-bottom: ${({\n  theme\n}) => theme.spacing(2)};\n  border: 1px solid ${({\n  theme\n}) => theme.colors.danger}30;\n`;\n_c3 = ErrorMessage;\nconst LinkText = styled.p`\n  text-align: center;\n  margin-top: ${({\n  theme\n}) => theme.spacing(3)};\n  color: ${({\n  theme\n}) => theme.colors.gray[600]};\n  \n  a {\n    color: ${({\n  theme\n}) => theme.colors.primary};\n    font-weight: 600;\n  }\n`;\n_c4 = LinkText;\nexport default function Login() {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const onSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n    try {\n      const {\n        token,\n        user\n      } = await login(email, password);\n      saveToken(token);\n      saveUser(user);\n      if (user.role === \"student\") navigate(\"/student/start\");else if (user.role === \"hod\") navigate(\"/department/dashboard\");else navigate(\"/admin/dashboard\");\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Login failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"Login to Your Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Field, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            placeholder: \"you@example.com\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Field, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          disabled: loading,\n          style: {\n            width: \"100%\"\n          },\n          children: loading ? \"Signing In...\" : \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LinkText, {\n        children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"Register as Student\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 34\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"H5SEsqUKGsvRU5w/7dxDfZrAxrw=\", false, function () {\n  return [useNavigate];\n});\n_c5 = Login;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"ErrorMessage\");\n$RefreshReg$(_c4, \"LinkText\");\n$RefreshReg$(_c5, \"Login\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","Link","useNavigate","Field","Button","Card","login","saveToken","saveUser","styled","jsxDEV","_jsxDEV","Container","div","theme","spacing","_c","Title","h2","colors","text","_c2","ErrorMessage","danger","radius","_c3","LinkText","p","gray","primary","_c4","Login","email","setEmail","password","setPassword","error","setError","loading","setLoading","navigate","onSubmit","e","preventDefault","token","user","role","err","_err$response","_err$response$data","response","data","message","children","fileName","lineNumber","columnNumber","type","value","onChange","target","placeholder","required","disabled","style","width","to","_c5","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Projects/school-clearance-system/client/src/pages/auth/Login.js"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Link, useNavigate } from \"react-router-dom\"\r\nimport Field from \"../../components/FormField\"\r\nimport Button from \"../../components/Button\"\r\nimport Card from \"../../components/Card\"\r\nimport { login } from \"../../services/auth\"\r\nimport { saveToken, saveUser } from \"../../services/storage\"\r\nimport styled from \"styled-components\"\r\n\r\nconst Container = styled.div`\r\n  max-width: 400px;\r\n  margin: ${({ theme }) => theme.spacing(4)} auto;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  text-align: center;\r\n  margin-bottom: ${({ theme }) => theme.spacing(3)};\r\n  color: ${({ theme }) => theme.colors.text};\r\n`\r\n\r\nconst ErrorMessage = styled.div`\r\n  color: ${({ theme }) => theme.colors.danger};\r\n  background: ${({ theme }) => theme.colors.danger}10;\r\n  padding: ${({ theme }) => theme.spacing(1.5)};\r\n  border-radius: ${({ theme }) => theme.radius};\r\n  margin-bottom: ${({ theme }) => theme.spacing(2)};\r\n  border: 1px solid ${({ theme }) => theme.colors.danger}30;\r\n`\r\n\r\nconst LinkText = styled.p`\r\n  text-align: center;\r\n  margin-top: ${({ theme }) => theme.spacing(3)};\r\n  color: ${({ theme }) => theme.colors.gray[600]};\r\n  \r\n  a {\r\n    color: ${({ theme }) => theme.colors.primary};\r\n    font-weight: 600;\r\n  }\r\n`\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [error, setError] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const navigate = useNavigate()\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    setError(\"\")\r\n\r\n    try {\r\n      const { token, user } = await login(email, password)\r\n      saveToken(token)\r\n      saveUser(user)\r\n\r\n      if (user.role === \"student\") navigate(\"/student/start\")\r\n      else if (user.role === \"hod\") navigate(\"/department/dashboard\")\r\n      else navigate(\"/admin/dashboard\")\r\n    } catch (err) {\r\n      setError(err?.response?.data?.message || \"Login failed\")\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Card>\r\n        <Title>Login to Your Account</Title>\r\n        <form onSubmit={onSubmit}>\r\n          <Field>\r\n            <label>Email Address</label>\r\n            <input\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder=\"you@example.com\"\r\n              required\r\n            />\r\n          </Field>\r\n          <Field>\r\n            <label>Password</label>\r\n            <input\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              placeholder=\"••••••••\"\r\n              required\r\n            />\r\n          </Field>\r\n          {error && <ErrorMessage>{error}</ErrorMessage>}\r\n          <Button type=\"submit\" disabled={loading} style={{ width: \"100%\" }}>\r\n            {loading ? \"Signing In...\" : \"Sign In\"}\r\n          </Button>\r\n        </form>\r\n        <LinkText>\r\n          Don't have an account? <Link to=\"/register\">Register as Student</Link>\r\n        </LinkText>\r\n      </Card>\r\n    </Container>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}